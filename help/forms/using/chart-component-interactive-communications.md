---
title: 在Interactive Communications中使用图表
seo-title: Interactive Communications中的图表组件
description: '使用交互式通信中的图表，您可以将大量信息浓缩为易于分析和理解的可视格式  '
seo-description: AEM Forms提供了一个图表组件，您可以使用它在交互式通信中创建图表。 本文档介绍图表组件的基本配置和代理配置。
uuid: dedd670c-030b-4497-bbcb-3ad935cebcda
content-type: reference
products: SG_EXPERIENCEMANAGER/6.4/FORMS
topic-tags: interactive-communications
discoiquuid: 16c7e698-258d-4e63-9828-f538dc7d3294
feature: Interactive Communication
translation-type: tm+mt
source-git-commit: 75312539136bb53cf1db1de03fc0f9a1dca49791
workflow-type: tm+mt
source-wordcount: '2425'
ht-degree: 0%

---


# 在Interactive Communications {#using-charts-in-interactive-communications}中使用图表

使用交互式通信中的图表，您可以将大量信息浓缩为易于分析和理解的可视格式

图表或图表是数据的可视表示形式。 它将大量信息浓缩为易于理解的可视格式，使交互式通信的收件人能够更好地可视化、解释和分析复杂数据。

在创建交互式通信时，您可以添加图表以可视方式表示来自交互式通信的表单数据模型的二维数据。 图表组件允许您添加和配置以下类型的图表：

* 饼图
* 列
* 环形
* 栏(仅限Web渠道)
* Line
* 线和点
* 点
* 区域

## 在交互通信{#add-and-configure-chart-in-an-interactive-communication}中添加和配置图表

完成以下步骤，将图表添加到交互式通信：

1. 从AEM提要栏中的组件中，将图表组件拖放到交互通信的打印或Web渠道中的以下任一位置：

   * 打印渠道:目标区域和图像字段
   * Web渠道:面板和目标区域

   放置的图表组件会为图表创建占位符。

1. 点按交互式通信编辑器中的图表组件，然后从组件工具栏中选择&#x200B;**[!UICONTROL 配置(]** ![configure_icon](assets/configure_icon.png))。

   将显示属性侧栏，焦点是图表的基本属性。

   ![打印渠道中折线图的基本属性](assets/chart_basicproperties.png)
   **图：打** *印渠道中折线图的基本属性*

   ![Web渠道中折线图的基本属性](assets/basicpropertieswebchannel.png)
   **图：** *Web渠道中折线图的基本属性*

1. 配置图表的“基本”属性以进行打印渠道和Web渠道。 除了常用属性外，还有特定于打印和Web渠道以及图表类型的属性。

   * **[!UICONTROL 名称]**:图表对象的名称。您在此处指定的图表名称不显示在图表输出中，但在规则中用于引用图表。
   * **[!UICONTROL 图表类型]**:指定图表类型：饼图、列、圆环、线、线和点、点或区域。
   * **[!UICONTROL 隐藏对象]**:选择以在最终输出中隐藏图表。
   * 为&#x200B;**[!UICONTROL x轴]**&#x200B;和&#x200B;**[!UICONTROL y轴]**&#x200B;指定以下内容：

      * **[!UICONTROL 标题]**:指定要在交互通信中显示的X和Y轴的标题。
      * **[!UICONTROL 数据模型对象*]**:从创建交互通信时指定的表单数据模型浏览并选择图表X和Y轴的数据模型对象。选择同一父级数据模型对象的两个集合/数组类型属性，这些属性相互有意义，可在图表的X和Y轴上绘图。
      * **[!UICONTROL 函数]**:要使用统计函数计算轴上的值，请为X/Y轴选择函数。有关函数的详细信息，请参阅[使用图表](#usefunction)和[示例2:求和和和均值函数在折线图](#applicationsumfrequency)中的应用。

   >[!NOTE]
   >
   >对于打印渠道，在X轴上，您绑定的数据模型对象应为“数字”、“字符串”或“日期”类型。 在Y轴上，您绑定的数据模型对象应为Number类型。 建议您在打印渠道中使用右侧图例。

   有关图表属性的详细信息，请参阅图表](#basicpropertiescharts)中的[基本属性。

1. (仅打印渠道)在“代理设置”中，指定代理是否必须使用此图表。 如果未选择&#x200B;**[!UICONTROL ，代理必须使用此图表]**&#x200B;选项，则代理可点击代理UI的“内容”选项卡中图表的眼睛图标以显示/隐藏图表。

   ![chart_agent属性](assets/chart_agentproperties.png)

1. 在“属性”提要栏中，点按![done_icon](assets/done_icon.png)。

   预览以查看图表的外观和数据。 如果需要，返回以重新配置图表的属性。

1. 返回到在交互通信中进行其他更改。

## 示例1:打印和Web中的图表输出{#chartoutputprintweb}

在“基本”选项卡中，您定义图表类型、包含数据的源表单数据模型属性、要在图表的x轴和y轴上绘制的标签，以及（可选）用于计算在图表上绘制的值的统计函数。

让我们借助通过交互式通信生成的信用卡对帐单，详细了解基本属性中的最低要求信息。 请考虑您要生成一个图表来描述报表中不同费用的金额。 您希望使用不同类型的图表来打印和Web输出交互通信。

要完成此操作，您需要指定：

* **[!UICONTROL 图表类型]**  — 在此示例中，用于打印渠道的列和用于Web渠道的圆环
* **[!UICONTROL 数据模]** 型对象作为图表X和Y轴的源 — 在此示例中，X轴的事务处理金额和Y轴的费用名称
* **[!UICONTROL X和]** Y轴的标题(仅在此示例中，适用于打印渠道中的列类型图表) — 在此示例中，X轴的金额($)和Y轴的费用。
* **[!UICONTROL 标签方向]** (对于仅在此示例中打印渠道中的列类型图表) — 在此示例中  `Tilt Left`

* **[!UICONTROL 工]** 具渠道显示在费用的鼠标上（仅限Web） — 在此示例中 `${x}: $ ${y}`，显示 `[Expense Label: $ Amount]` 为(示例：主题公园访问：315美元)

![交互式通信的打印输出中的](assets/chartprintchannel.png)
**柱状图Figure:** *交互式通信的打印输出中的柱状图*

**A.** Y轴 — 从表单数据模型属性获取的金额，将标题属性设置为Amount($)  **B.** Label Direction of X-is设置为Tilt Left  **C.X** Axis — 从表单数据模型属性获取的费用说明，将标题属性设置为Expense

![交互式通信Web输出中的圆环](assets/chartwebchannel.png)
**图图：** *交互式通信Web输出中的圆环图*

**A.** 圆环的“内半径”属 **性已设** 置B. **选择“显示图例”属性，将“图例位置”属性设置为“右侧”。** 工具提示在鼠标悬停时显示项的详细信息 — 工具提示设置为${x}:$${y}

## 示例2:求和函数和频率函数在线图{#applicationsumfrequency}中的应用

通过应用图表中的函数，可以绘制表单数据模型不直接提供的数据。 在此示例中，我们使用信用卡对帐单示例来了解如何将Sum和Frequency函数应用到图表。

![无函数折线图，包含三个“Bed and Breakfast”事](assets/creditcarddatalinechartcopy.png)
**务图：** *无函数折线图，包含三个“Bed and Breakfast”事务*

### Sum函数{#sum-function}

您可以应用sum函数来累加同一数据属性的多个实例的值，并且只显示一次。 例如，在下图中，将在Y轴上应用“和”函数，以累计三个“住宿加早餐”事务处理（$99.45、$78和$12）的金额，并且只显示一个事务处理($189.45)。

Sum函数可让图表在您希望对相同数据属性的许多实例进行拼贴和显示sum时更有用。

![creditcardchartsumfunctioncopy](assets/creditcardchartsumfunctioncopy.png)

### 频率函数{#frequency-function}

Frequency函数返回X或Y轴上另一个轴上给定值的值数。 在y轴(Amount/TransAmount)上应用“频率”函数时，该图显示出已发生三次“住宿加早餐”事务处理，以及一次发生了其他类型的事务处理。

![creditcardcharfrequencyfunctioncopy](assets/creditcardchartfrequencyfunctioncopy.png)

## 图表{#basicpropertiescharts}中的基本属性

在“基本”选项卡中，可以配置以下属性：

**名** 称图表元素的标识符。名称在图表上不可见，但在引用其他组件、脚本和SOM表达式中的元素时，该名称会有所帮助。

**标题(仅限打印渠道)** 指定图表的标题。

**图** 表类型指定要生成的图表的类型。可用选项有饼图、列、圆环、条(仅限Web渠道)、线、线和点、点和区域。 有关详细信息，请参阅示例1:打印和Web中的图表输出。

**X轴>标** 题指定X轴的标题。

**X轴>数据模型对象(&amp;A);** 指定要在X轴上绘制的表单数据模型集合项的名称。

**X轴>函** 数指定用于计算X轴上值的统计/自定义函数。有关函数的详细信息，请参阅使用图表中的函数和示例2:求和和和均值函数在折线图中的应用

**X轴>标签方** 向图表上标签在打印渠道中的方向。如果将标签的方向选为“自定旋转”，则会显示“自定旋转角度（度）”字段。 在“自定旋转角度（度）”(Custom Rotation Angle(degrees))字段中，可以按15度的步骤选择旋转角度。

**Y轴>标** 题指定Y轴的标题。

**Y轴>数据模型对象(&amp;A);** 指定要在Y轴上绘制的表单数据模型收集项。在“打印”渠道中，Y轴的数据模型对象的类型应为“编号”。

**Y轴>函** 数指定用于计算Y轴上值的统计/自定义函数。有关函数的详细信息，请参阅使用图表中的函数和示例2:求和和和均值函数在折线图中的应用

**显示** 图例启用时显示饼图或圆环图的图例。

**图** 例位置指定图例相对于图表的位置。可用选项有“右”、“左”、“上”和“下”。

**高度(仅限打印渠道)** 图表的高度（以像素为单位）。

**宽度(仅限打印渠道)** 图表的宽度（以像素为单位）。

>[!NOTE]
>
>您可以使用样式图层或通过应用主题来控制Web渠道中图表的宽度。

**工具提示(仅限Web渠道** )指定工具提示在Web渠道中图表数据点上的鼠标悬停时显示的格式。默认值为\${x}(\${y})。 根据图表类型，当您将鼠标指向图表中的点、条或切片时，变量\${x}和\${y}将动态替换为x轴和y轴上的相应值，并显示在工具提示中。

要禁用工具提示，请将“工具提示”字段留空。 此选项不适用于线图和面积图。 例如，请参阅[示例1:打印和Web](#chartoutputprintweb)中的图表输出。

**CSS类(仅限Web渠道)** 在CSS类字段中指定CSS类的名称以将自定义样式应用于图表。

**前面的必填分页符(仅限打印渠道** )选择此项可在图表前面添加一个必填分页符，并将图表放在新页面的顶部。

**强制分页后(仅限打印渠道)** 选择此项可在图表后添加强制分页，并将图表后的内容放在新页面的顶部。

**缩进(仅限打印渠道** )指定图表从页面左侧的缩进。

**图表特定** 的配置除了常见的配置外，还提供以下图表特定的配置：

* **内半径**:可用于“圆环图”以指定图表中内圆的半径（以像素为单位）。
* **线条颜色**:可用于线图、线图、点图和面积图，以指定图表中线的颜色的十六进制值。
* **点颜色**:可用于点图和线图和点图表，以指定图表中点的颜色的十六进制值。

* **区域颜色**:对于“面积图”可用，用于指定图表线下区域颜色的十六进制值。

## 在图表{#usefunction}中使用函数

您可以配置图表以使用统计函数从源数据计算值，以便在图表上绘图。 通过应用图表中的函数，可以绘制表单数据模型不直接提供的数据。

虽然图表组件包含一些内置函数，但您可以编写自己的函数并使它们可用于Web渠道的图表配置中。

![函数图表](assets/functionchart.png)

>[!NOTE]
>
>您可以使用函数计算图表中X轴或Y轴的值。

### 默认函数{#default-functions}

图表组件默认提供以下功能：

**平均值(平** 均值)返回X或Y轴上其它轴上给定值的平均值。

**Sum** 返回X轴或Y轴上另一个轴上某个给定值的所有值的和。

**最** 大值返回X轴或Y轴上另一个轴上给定值的最大值。

**频** 率返回X轴或Y轴上另一个轴上给定值的值数。

**范** 围返回X轴或Y轴上其它轴上给定值的最大值与最小值之差。

**中** 值返回在X轴或Y轴上为另一轴上的给定值分隔高值和低值的值。

**最小** 值返回X轴或Y轴上其它轴上给定值的最小值。

**模** 式在X或Y轴上返回在另一个轴上给定值出现次数最多的值

### Web渠道{#custom-functions-in-web-channel}中的自定义函数

除了使用图表中的默认函数外，您还可以在JavaScript™中编写自定义函数，并在“图表”组件中的列表中使这些函数可用于Web渠道。

函数将数组或值和类别名称作为输入并返回值。 例如：

```
Multiply(valueArray, category) {
 var val = 1;
 _.each(valueArray, function(value) {
 val = val * value;
 });
 return val;
}
```

编写自定义函数后，请执行以下操作以使其可用于图表配置：

1. 在与相关交互通信关联的客户端库中添加自定义函数。 有关详细信息，请参阅[配置提交操作](/help/forms/using/configuring-submit-actions.md)和[使用客户端库](/help/sites-developing/clientlibs.md)。

1. 要在“函数”下拉菜单中显示自定义函数，请在CRXDe Lite中，使用以下属性在apps文件夹中创建一个`nt:unstructured`节点：

   * 添加属性`guideComponentType`，其值为`fd/af/reducer`。 (mandatory)
   * 将属性`value`添加到自定义JavaScript™函数的完全限定名。 （必填），将其值设置为自定义函数的名称，如“乘号”。
   * 添加属性`jcr:description`，其值要显示为“函数”下拉列表中显示的自定义函数的名称。 例如，**Multiply**。
   * 添加属性`qtip`，其值将是自定义函数的简短描述。 当将指针悬停在&#x200B;**Function**&#x200B;下拉列表中的函数名称上时，它将显示为工具提示。

1. 单击&#x200B;**保存全部**&#x200B;以保存配置。

该函数现在可在图表中使用。